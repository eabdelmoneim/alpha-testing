"use client";
import { jsx as _jsx } from "react/jsx-runtime";
import { useEffect, useState } from "react";
import { getInstalledWalletProviders } from "../../../../wallets/injected/mipdStore.js";
import { getLastAuthProvider } from "../../wallets/in-app/storage.js";
import { emailIcon, phoneIcon } from "../ConnectWallet/icons/dataUris.js";
import { appleIconUri, facebookIconUri, googleIconUri, } from "../ConnectWallet/icons/socialLogins.js";
import { radius } from "../design-system/index.js";
import { useWalletImage } from "../hooks/useWalletInfo.js";
import { Img } from "./Img.js";
// Note: Must not use useConnectUI here
/**
 * @internal
 */
export function WalletImage(props) {
    const [image, setImage] = useState(undefined);
    useEffect(() => {
        async function fetchImage() {
            let mipdImage = getInstalledWalletProviders().find((provider) => provider.info.rdns === props.id)?.info.icon;
            if (props.allowOverrides && props.id === "inApp") {
                // check last auth provider and override the IAW icon
                const lastAuthProvider = await getLastAuthProvider();
                switch (lastAuthProvider) {
                    case "google":
                        mipdImage = googleIconUri;
                        break;
                    case "apple":
                        mipdImage = appleIconUri;
                        break;
                    case "facebook":
                        mipdImage = facebookIconUri;
                        break;
                    case "phone":
                        mipdImage = phoneIcon;
                        break;
                    case "email":
                        mipdImage = emailIcon;
                        break;
                }
            }
            setImage(mipdImage);
        }
        fetchImage();
    }, [props.id, props.allowOverrides]);
    if (image) {
        return (_jsx(Img, { src: image, width: props.size, height: props.size, loading: "eager", client: props.client, style: {
                borderRadius: radius.md,
            } }));
    }
    return (_jsx(WalletImageQuery, { id: props.id, size: props.size, client: props.client }));
}
function WalletImageQuery(props) {
    const walletImage = useWalletImage(props.id);
    return (_jsx(Img, { client: props.client, src: walletImage.data, width: props.size, height: props.size, loading: "eager", style: {
            borderRadius: radius.md,
        } }));
}
//# sourceMappingURL=WalletImage.js.map